party Sender;

type TimestampDatum {
    current_slot: Int,
    expiry_slot: Int,
}

tx create_timestamp_tx(deadline: Int) {
    input source {
        from: Sender,
        min_amount: Ada(2000000),
    }

    output timestamp_output {
        to: Sender,
        amount: source - fees,
        datum: TimestampDatum {
            current_slot: slots_to_unix_time(tip_slot()),
            expiry_slot: unix_time_to_slots(deadline),
        },
    }
}
